The state House on Tuesday adopted an updated form of the controversial Senate bill that some warn includes a mandate for the State Police to start registering firearms.

The measure, SB 337, passed the House in a 65-49 roll call that included a few Republicans lending their support but fell two votes shy of a veto-proof margin. The bill now heads back to the state Senate, which passed an earlier version two weeks ago, to consider a host of changes added by House lawmakers.

State Rep. Kathleen Willis, D-Addison, described the measure as “A bill that will add to the toolbox to help keep guns out of the wrong people’s hands.”

If signed into law in its current form, state police would issue certifications to gun shops on a sliding fee, and dealers would have to meet a series of new requirements including annual staff training, instituting a gun storage plan and allowing inspections by local law enforcement. A House amendment penned by Willis was adopted that includes language that gun rights groups caution could pave the way for a firearms registration authority for State Police, bringing a scene from John Milius’s Red Dawn to the floor debate.

“When the bad guys invaded the town, what did they do? They went to the sporting goods store and they wanted to look up the gun registry,” said Rep. Allen Skillicorn, R-West Dundee. “They wanted to look up the records of who owned the guns. Nothing is going to stop the state of Illinois from looking up this information if we now require this. This is a gun registry and that’s it.”

The bill now heads to the Senate for debate as the session comes within days of ending. If a concurrence sends it to Gov. Bill Rauner’s desk, it could very well be met with the same veto ink the Republican dropped on a previous version in March.

“This is the kinda legislation that is really more for headlines than it is to really keep the people of Illinois safe,” Rauner said in a radio interview discussing SB 337 earlier this month.